# Archiver-in-C
Проект Сергеева Егора 23933

##1. Описание

Проект представляет собой приложение командной строки, которое кодирует и декодирует текстовые файлы по алгоритму Хаффмана. Приложение может создавать “архив”, в котором будет хранится количество закодированных ранее файлов и список их имён. Также в качестве результата работы выдаёт закодированные и раскодированные файлы.
##2. Программные файлы и функции
Весь проект разбит на 3 *.c файла.
- huffman.c
- archive.c
- main.c
### huffman.c
В нём хранятся структуры и функции для реализации алгоритма Хаффмана.
- Структура Code используется для хранения таблицы сжатых кодов символов, удобного вывода через неё в итоговый файл сжатого текста и восстановления по ней дерева Хаффмана.
- Структура Node используется для хранения дерева Хаффмана, с помощью которого мы кодируем символы файла.
- Функция quickSort() используется для сортировки листьев дерева Хаффмана в массиве в процессе его создания.
- Функция filesize() используется чтобы узнать длину текста в файле.
- Функция create_Node() нужна для создания листа дерева.
- Функция build_tree() применяется для создания дерева по списку частот символов в файле и их количеству.
- Функция code_generation() нужна для заполнение таблицы кодов по дереву Хаффмана.
- Функция build_tree_from_code() является обратной предыдущей функции: она строит дерево по таблице кодов.
- Функция decode() используется для декодировки символов из закодированного файла.
### archive.c
В нём хранятся функции для работы с файлами и “архивом”.
- Функция create_archive() создаёт “архив”.
- Функция check_in_arch() проверяет наличие закодированного файла в “архиве”.
- Функция compress() начинает процесс кодировки файла.
- Функция decompress() декодирует файл.
- Функция list_files() выводит список всех ранее закодированных файлов.
### main.c
В нём реализована работа приложения архиватора.
## 3. Работа и компиляция программы.
Приложение поддерживает 4 команды для пользователя.
- create – создание архива
- compress – кодирование файла
- decompress – декодирование файла
- list – вывод списка ранее закодированных файлов

В случае неправильного ввода команд приложение выведет ошибку или инструкцию по использованию.

Для компиляции можно воспользоваться GCC. Перейдите в папку с файлами программы (в ней также должны лежать 2 файла *.h) через команду cd в командной строке. Далее введите запрос с названием приложения (любое, какое вам нравится =)) и всеми файлами *.c.

Пример: gcc -o archi main.c arhive.c huffman.c

В ходе работы возможен вылет программы из-за вызова рекурсивных функций code_generation() и decode().  Количество самовызовов до ошибки каждый раз разное. Во время тестировки наблюдалось от 3 до 21 вызова функций. Данная проблема не касается кодировки коротких файлов. В случае возникновения данной ошибки рекомендуется запускать код через различные IDE(Например: проект в Visual Studio). Для работы в таком случае перед запуском файла main.c разкоментируйте строчки 17 и 18 в файле main.c и в нужных полях введите название функции, архива и имени файлов.

Пример:

1) argc = 3;

argv[1] = "create"; argv[2] = "archive"; argv[3] = ""; argv[4] = "";

2) argc = 5;

argv[1] = "compress"; argv[2] = "archive"; argv[3] = "inp.txt"; argv[4] = "out.txt"; 

Переменную argc можете оставлять без изменений.

Примеры работы проекта:
1) Ввод:
   
Comand: archi create archive

Выходные данные:

archive  (в бинарном представлении):

4D 3C 2B 1A 00 00 00 00

2) Входные данные:

inp.txt:

Hello World!

archive  (в бинарном представлении):

4D 3C 2B 1A 00 00 00 00

Ввод:

Comand: archi сompress archive inp.txt out.txt

Выходные данные:

archive  (в бинарном представлении):

4D 3C 2B 1A 01 00 00 00 07 6F 75 74 2E 74 78 74

out.txt (в бинарном представлении):

25 00 00 00 09 6F 02 00 6C 02 40 72 03 80 57 04 A0 64 04 B0 48 04 C0 20 04 D0 65 04 E0 21 04 F0 CE 53 68 8D F8

3) out.txt (в бинарном представлении):

25 00 00 00 09 6F 02 00 6C 02 40 72 03 80 57 04 A0 64 04 B0 48 04 C0 20 04 D0 65 04 E0 21 04 F0 CE 53 68 8D F8

archive  (в бинарном представлении):

4D 3C 2B 1A 01 00 00 00 07 6F 75 74 2E 74 78 74

Ввод:

Comand: archi deсompress archive out.txt inp_rez.txt

Выходные данные:

inp_rez.txt

Hello World!

4) archive  (в бинарном представлении):

4D 3C 2B 1A 01 00 00 00 07 6F 75 74 2E 74 78 74

Ввод:

Comand: archi list archive

Выходные данные:

The list of the 'archive' archive:

1. out.txt
